#!/bin/bash
server_ip=$1
username=$2
ssh $username@$server_ip "sudo chmod 777 /etc/environment && sudo echo 'JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64' >> /etc/environment && sudo echo 'HADOOP_HOME=/home/hadoop/hadoop' >> /etc/environment && sudo echo 'HADOOP_CONF_DIR=/home/hadoop/hadoop/etc/hadoop' >> /etc/environment && sudo echo 'HADOOP_INSTALL=/home/hadoop/hadoop' >> /etc/environment && sudo echo 'HADOOP_MAPRED_HOME=/home/hadoop/hadoop' >> /etc/environment && sudo echo 'HADOOP_COMMON_HOME=/home/hadoop/hadoop' >> /etc/environment && sudo echo 'HADOOP_HDFS_HOME=/home/hadoop/hadoop' >> /etc/environment && sudo echo 'YARN_HOME=/home/hadoop/hadoop' >> /etc/environment && sudo echo 'HADOOP_COMMON_LIB_NATIVE_DIR=/home/hadoop/hadoop/lib/native' >> /etc/environment && sudo echo 'PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/jvm/java-8-openjdk-amd64/bin:/home/hadoop/hadoop/sbin:/home/hadoop/hadoop/bin' >> /etc/environment && echo '#!/bin/bash' > /home/hadoop/refresh.sh && echo 'source /etc/environment' >> /home/hadoop/refresh.sh && chmod +x refresh.sh && ./refresh.sh && sudo chmod 777 /home/hadoop/hadoop/logs && sudo chown hadoop /home/hadoop/hadoop && sudo chmod -R 777 /home/hadoop/hadoop"